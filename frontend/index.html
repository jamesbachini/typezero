<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>TypeZERO</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600&family=Space+Grotesk:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <div class="page">
      <header class="hero">
        <div>
          <p class="eyebrow">ZK-Verified Typing Challenge</p>
          <h1>TypeZERO</h1>
          <p class="lede">
            Prove every keystroke. Testnet-only flow with on-chain leaderboards and a
            backend prover.
          </p>
        </div>
        <div class="hero-card">
          <div>
            <span class="chip">Network</span>
            <p class="hero-value">Stellar Testnet</p>
          </div>
          <div>
            <span class="chip">Proofs</span>
            <p class="hero-value">Risc0 (Groth16 verifier)</p>
          </div>
        </div>
      </header>

      <div id="banner" class="banner" data-tone="info"></div>

      <main class="grid">
        <section class="panel" data-animate="1">
          <div class="panel-header">
            <h2>Wallet</h2>
            <div class="panel-actions">
              <button id="wallet-create" class="button">Create & fund wallet</button>
              <button id="wallet-clear" class="button ghost" disabled>Clear</button>
            </div>
          </div>
          <p class="hint">Demo wallet is generated by the backend (testnet only).</p>
          <div class="panel-body">
            <div class="row">
              <span class="label">Public Key</span>
              <span id="wallet-pubkey" class="mono">—</span>
            </div>
            <div class="row">
              <span class="label">Secret Key</span>
              <span id="wallet-secret" class="mono">—</span>
            </div>
            <div class="row">
              <span class="label">Balance</span>
              <span id="wallet-balance" class="mono">—</span>
            </div>
            <div id="wallet-status" class="status" data-tone="info"></div>
          </div>
        </section>

        <section class="panel" data-animate="2">
          <div class="panel-header">
            <h2>Challenge</h2>
            <div class="panel-actions">
              <button id="challenge-reload" class="button ghost">Reload</button>
              <button id="challenge-start" class="button" disabled>Start typing</button>
            </div>
          </div>
          <div class="panel-body">
            <div class="row">
              <span class="label">Challenge ID</span>
              <span id="challenge-id" class="mono">—</span>
            </div>
            <div class="row">
              <span class="label">Prompt Hash</span>
              <span id="challenge-hash" class="mono">—</span>
            </div>
            <div class="prompt" id="challenge-prompt">Loading…</div>
            <div class="typing">
              <div class="typing-label">Your input</div>
              <textarea
                id="typing-input"
                class="typing-input"
                autocomplete="off"
                autocapitalize="none"
                spellcheck="false"
                disabled
              ></textarea>
            </div>
            <div class="stats">
              <div>
                <span class="label">WPM</span>
                <span id="preview-wpm" class="stat">—</span>
              </div>
              <div>
                <span class="label">Accuracy</span>
                <span id="preview-accuracy" class="stat">—</span>
              </div>
              <div>
                <span class="label">Score</span>
                <span id="preview-score" class="stat">—</span>
              </div>
              <div>
                <span class="label">Duration</span>
                <span id="preview-duration" class="stat">—</span>
              </div>
            </div>
            <div id="preview-warnings" class="status" data-tone="warn"></div>
            <button id="typing-submit" class="button wide" disabled>
              Submit or Hit Enter
            </button>
          </div>
        </section>

        <section class="panel" data-animate="3">
          <div class="panel-header">
            <h2>Submit</h2>
          </div>
          <div class="panel-body">
            <label class="label" for="player-name">Player name (1–24 ASCII)</label>
            <input
              id="player-name"
              class="text-input"
              type="text"
              maxlength="24"
              placeholder="enter name"
            />
            <button id="submit-score" class="button wide" disabled>
              Generate proof + Submit
            </button>
            <div id="submit-status" class="status" data-tone="info"></div>
          </div>
        </section>

        <section class="panel panel-wide" data-animate="4">
          <div class="panel-header">
            <h2>Leaderboard</h2>
            <span class="label">Top 20</span>
          </div>
          <div class="panel-body">
            <table class="leaderboard">
              <thead>
                <tr>
                  <th>Rank</th>
                  <th>Player</th>
                  <th>Name</th>
                  <th>Score</th>
                  <th>WPM</th>
                  <th>Accuracy</th>
                </tr>
              </thead>
              <tbody id="leaderboard-body">
                <tr>
                  <td colspan="6">Loading…</td>
                </tr>
              </tbody>
            </table>
            <div id="leaderboard-status" class="status" data-tone="info"></div>
          </div>
        </section>

        <section class="panel panel-wide" data-animate="5">
          <div class="panel-header">
            <h2>Config</h2>
            <span class="label">Overrides</span>
          </div>
          <div class="panel-body">
            <p class="hint">
              Set <span class="mono">window.TYPEZERO_CONFIG</span> or localStorage key
              <span class="mono">typezero-config</span> with JSON overrides.
            </p>
            <pre id="config-info" class="config"></pre>
          </div>
        </section>
      </main>
    </div>

    <script src="/node_modules/@stellar/stellar-sdk/dist/stellar-sdk-no-eventsource.min.js"></script>
    <script src="./config.local.js"></script>
    <script type="module" src="./app.mjs"></script>
  </body>
</html>
